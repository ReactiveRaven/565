<html>
  <head>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <style>
      h1 {
        background: white;
        color: #DCDCDC;
      }
      
      input {
        background: white;
        color: black;
      }
    </style>
  </head>
  <body>
    <h1>In Hex</h1>
    <input id="rgb" type="text" name="rgb" />
    <h1>In RGB</h1>
    R<input id="r" type="text" />
    G<input id="g" type="text" />
    B<input id="b" type="text" />
    <h1>In 565</h1>
    <input id="fsf" type="text" name="fsf" />
    <script>
    
    // Thanks to Pointy @ Stackoverflow:
    // http://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript
    function pad(n, width, z) {
      z = z || '0';
      n = n + '';
      return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
    }
    
    function updateBg() {
      $("body").css({background: $("#rgb").val() });
    }
    
    
      $(document).ready(function () {
        $("#rgb").on("keyup", function () {
          var rgbval = $("#rgb").val();
          // Chop 'em out, convert to integers, 0-255.
          var r = parseInt(rgbval.substr(0,2), 16);
          var g = parseInt(rgbval.substr(2,2), 16);
          var b = parseInt(rgbval.substr(4,2), 16);
          
          $("#r").val(r);
          $("#g").val(g);
          $("#b").val(b);
          
          // Strip LSBs off until we hit 565!
          r = r >> 3;
          g = g >> 2;
          b = b >> 3;
          
          // Arrange and slot them together in order
          r = r << 11;
          g = g << 5;
          var fsf = r | g | b;
          
          // Convert back to hex, output.
          $("#fsf").val(fsf.toString(16).toUpperCase());
          
          updateBg();
          
        });
        
        $("#fsf").on("keyup", function () {
          var fsfval = $("#fsf").val();
          
          // Convert back to dec
          fsfval = parseInt(fsfval, 16);
          
          // Chop out
          var r = fsfval >> 11;
          var g = (fsfval >> 5) & (1 + 2 + 4 + 8 + 16 + 32);
          var b = fsfval & (1 + 2 + 4 + 8 + 16);
          
          // Inflate back to 8-bits
          r = r << 3;
          g = g << 2;
          b = b << 3;
          
          $("#r").val(r);
          $("#g").val(g);
          $("#b").val(b);
          
          // Convert back to hex, output.
          $("#rgb").val((pad(r.toString(16), 2, 0) + pad(g.toString(16), 2, 0) + pad(b.toString(16), 2, 0)).toUpperCase());
          updateBg();
        });
        
        $("#r, #g, #b").on("keyup", function () {
          var r = parseInt($("#r"), 10);
          var g = parseInt($("#g"), 10);
          var b = parseInt($("#b"), 10);
          
          // Update the hex output straight away...
          $("#rgb").val((pad(r.toString(16), 2, 0) + pad(g.toString(16), 2, 0) + pad(b.toString(16), 2, 0)).toUpperCase());
          
          // Strip LSBs off until we hit 565!
          r = r >> 3;
          g = g >> 2;
          b = b >> 3;
          
          // Arrange and slot them together in order
          r = r << 11;
          g = g << 5;
          var fsf = r | g | b;
          
          // Convert back to hex, output.
          $("#fsf").val(fsf.toString(16).toUpperCase());
          updateBg();
        });
      });
    </script>
  </body>
</html>
