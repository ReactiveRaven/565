<html>
  <head>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <style>
      h1, p {
        background: white;
        color: #555555;
      }
      
      input {
        background: white;
        color: black;
      }
    </style>
  </head>
  <body>
    <p>
      Enter the value you have into any of the boxes. The others update as you type. Numbers and letters only please.
    </p>
    <h1>In Hex</h1>
    <input id="rgb" type="text" name="rgb" />
    <h1>In RGB</h1>
    R<input id="r" type="text" />
    G<input id="g" type="text" />
    B<input id="b" type="text" />
    <h1>In HSL</h1>
    H<input id="h" type="text" />
    S<input id="s" type="text" />
    L<input id="l" type="text" />
    <h1>In 565</h1>
    <input id="fsf" type="text" name="fsf" />
    <script>
    
    // Thanks to Pointy @ Stackoverflow:
    // http://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript
    function pad(n, width, z) {
      z = z || '0';
      n = n + '';
      return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
    }
    
    function clamp(n, min, max) { return Math.min(max, Math.max(min, n)); }
    
    function updateBg() {
      $("body").css({background: "#" + $("#rgb").val() });
    }
    
    /**
 * Converts an RGB color value to HSL. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes r, g, and b are contained in the set [0, 255] and
 * returns h, s, and l in the set [0, 1].
 *
 * @param   Number  r       The red color value
 * @param   Number  g       The green color value
 * @param   Number  b       The blue color value
 * @return  Array           The HSL representation
 */
function rgbToHsl(r, g, b) {
  r /= 255, g /= 255, b /= 255;
 
  var max = Math.max(r, g, b), min = Math.min(r, g, b);
  var h, s, l = (max + min) / 2;
 
  if (max == min) {
    h = s = 0; // achromatic
  } else {
    var d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
 
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break;
      case g: h = (b - r) / d + 2; break;
      case b: h = (r - g) / d + 4; break;
    }
 
    h /= 6;
  }
 
  return [ h, s, l ];
}

/**
 * Converts an HSL color value to RGB. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes h, s, and l are contained in the set [0, 1] and
 * returns r, g, and b in the set [0, 255].
 *
 * @param   Number  h       The hue
 * @param   Number  s       The saturation
 * @param   Number  l       The lightness
 * @return  Array           The RGB representation
 */
function hslToRgb(h, s, l) {
  var r, g, b;
 
  if (s == 0) {
    r = g = b = l; // achromatic
  } else {
    function hue2rgb(p, q, t) {
      if (t < 0) t += 1;
      if (t > 1) t -= 1;
      if (t < 1/6) return p + (q - p) * 6 * t;
      if (t < 1/2) return q;
      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
      return p;
    }
 
    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var p = 2 * l - q;
 
    r = hue2rgb(p, q, h + 1/3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1/3);
  }
 
  return [ r * 255, g * 255, b * 255 ];
}
    
    
      $(document).ready(function () {
        $("#rgb").on("keyup", function () {
          var rgbval = $("#rgb").val();
          // Chop 'em out, convert to integers, 0-255.
          var r = parseInt(rgbval.substr(0,2), 16);
          var g = parseInt(rgbval.substr(2,2), 16);
          var b = parseInt(rgbval.substr(4,2), 16);
          
          $("#r").val(r);
          $("#g").val(g);
          $("#b").val(b);
          
          $("#r").trigger("keyup");
        });
        
        $("#fsf").on("keyup", function () {
          var fsfval = $("#fsf").val();
          
          // Convert back to dec
          fsfval = parseInt(fsfval, 16);
          
          // Chop out
          var r = fsfval >> 11;
          var g = (fsfval >> 5) & (1 + 2 + 4 + 8 + 16 + 32);
          var b = fsfval & (1 + 2 + 4 + 8 + 16);
          
          // Inflate back to 8-bits
          r = r << 3;
          g = g << 2;
          b = b << 3;
          
          $("#r").val(r);
          $("#g").val(g);
          $("#b").val(b);
          
          $("#r").trigger("keyup");
        });
        
        $("#r, #g, #b").on("keyup", function () {
          var r = clamp(parseInt($("#r").val(), 10), 0, 255);
          var g = clamp(parseInt($("#g").val(), 10), 0, 255);
          var b = clamp(parseInt($("#b").val(), 10), 0, 255);
          
          // Update the hex output straight away...
          $("#rgb").val((pad(r.toString(16), 2, 0) + pad(g.toString(16), 2, 0) + pad(b.toString(16), 2, 0)).toUpperCase());
          
          // Cheat on HSL.
          var hsl = rgbToHsl(r, g, b);
          $("#h").val(hsl[0]);
          $("#s").val(hsl[1]);
          $("#l").val(hsl[2]);
          
          // Strip LSBs off until we hit 565!
          r = r >> 3;
          g = g >> 2;
          b = b >> 3;
          
          // Arrange and slot them together in order
          r = r << 11;
          g = g << 5;
          var fsf = r | g | b;
          
          // Convert back to hex, output.
          $("#fsf").val(fsf.toString(16).toUpperCase());
          
          updateBg();
        });
        
        $("#h, #s, #l").on("keyup", function () {
          var h = parseFloat($("#h").val());
          var s = parseFloat($("#s").val());
          var l = parseFloat($("#l").val());
          
          var rgb = hslToRgb(h, s, l);
          $("#r").val(rgb[0]);
          $("#g").val(rgb[1]);
          $("#b").val(rgb[2]);
          
          $("#r").trigger("keyup");
        });
      });
    </script>
  </body>
</html>
